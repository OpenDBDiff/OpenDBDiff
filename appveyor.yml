image: Visual Studio 2017

version: 0.10.0.{build}

# enable patching of AssemblyInfo.* files
assembly_info:
  patch: true
  file: OpenDBDiff\Properties\AssemblyVersionInfo.cs
  assembly_version: "{version}"
  assembly_file_version: "{version}"
  assembly_informational_version: "{version}"

dotnet_csproj:
  patch: true
  file: '**\*.csproj'

before_build:
- cmd: nuget restore OpenDBDiff.sln

configuration: Release

build:
  parallel: true # enable MSBuild parallel builds
  project: OpenDBDiff.sln
  verbosity: minimal

after_build:
- cmd:  dotnet publish -c Release -f netcoreapp2.0 OpenDBDiffCmd

artifacts:
- path: OpenDBDiff\bin\Release
  name: OpenDBDiff.CI

- path: OpenDBDiffCmd\bin\Release\net452
  name: OpenDBDiff.OCDB.CI.net452

- path: OpenDBDiffCmd\bin\Release\netcoreapp2.0\publish
  name: OpenDBDiff.OCDB.CI.netcoreapp2.0
